{%extends "base.html"%} {%block title%} Home {%endblock%}
{%block nav%}
<nav class="nav flex-column col-lg-2 col-md-3 col-sm-4 " id="nav">
            
            <a class="nav-link" id="nav-link" href="/"><img width=100% src='static/balance.png'></a>
            <a class = "nav-link" id = "nav-link" href = "/logout">
            <form class = "nav-link" id = "nav-link" action = "/logout">
                <button type="button" class="btn btn-light">Logout</button>
            </form>
            </a>
            <a class="nav-link" id="nav-link" href="/account"><img height=25px src="static/account.png">Account</a>
            <a class="nav-link" id="nav-link" href="/addincome">Add Income</a>
            <a class="nav-link" id="nav-link" href="/addexpense">Add Expense</a>
            <a class="nav-link" id="nav-link" href="/itemlist">Your Items List</a>
        </nav>
{%endblock%}
{%block body%}
<h2 style = "text-align">Welcome {{first}}!</h2> 
<br> <br>
<h2>Here is your daily snapshot.</h2>
<div class="col-xs-12 col-md-6 align-self-center">
    <div class="card text-center">
        You've spent
        <h3>10000</h3>
        You've made
        <h3>10000</h3>
        You have
        <h3>$0</h3>
    </div>
</div>

<!--DONUT CHART-->

<!--<div class="col-xs-12 col-md-6 align-self-center" id = "my_dataviz" onresize="makeChart()">-->


<!--COOL FLOWY CHART-->

<!--<div class = "col-xs-12 col-md-6 align-self-center">-->
<!--    <svg id="fillgauge1" width="97%" height="200" onclick=""></svg>-->
<!--    <svg id="fillgauge2" width="97%" height="200" onclick=""></svg>-->
<!--    <svg id="fillgauge3" width="97%" height="200" onclick=""></svg>-->
<!--</div>-->


<!-- Cool FLowy thing PART 2 -->

<!--<div class = "col-xs-12 col-md-6 align-self-center">-->
<!--</div>-->
    
<!--    <svg id="fillgauge2" width="19%" height="200" onclick="gauge2.update(NewValue());"></svg>-->
<!--</div>-->
<div class = "col-xs-12 col-md-6 align-self-center">
<svg></svg>
    <script>
      var data = [100,-100];
      var leftMargin = 50;  // Space to the left of first bar; accomodates y-axis labels
      var rightMargin = 10; // Space to the right of last bar
      var margin = {left: leftMargin, right: rightMargin, top: 10, bottom: 10};
      var barWidth = 60;  // Width of the bars
      var chartHeight = Math.abs(d3.min(data)) + Math.abs(d3.max(data));  // Height of chart, from x-axis (ie. y=0)
      var chartWidth = margin.left + data.length * barWidth + margin.right;

      /* This scale produces negative output for negatve input */
      var yScale = d3.scaleLinear()
                     .domain([0, d3.max(data)])
                     .range([0, chartHeight]);
        console.log(yScale())

      /*
       * We need a different scale for drawing the y-axis. It needs
       * a reversed range, and a larger domain to accomodate negaive values.
       */
      var yAxisScale = d3.scaleLinear()
                         .domain([d3.min(data) - 10, d3.max(data) + 10])
                         .range([chartHeight - yScale(d3.min(data)), 0 ]);

      var svg = d3.select('svg');
      svg
          .attr('height', chartHeight + 100)
          .attr('width', chartWidth);

      svg
        .selectAll("rect")
        .data(data)
        .enter()
        .append("rect")
          .attr("x", function(d, i) { return margin.left + i * barWidth; })
          .attr("y", function(d, i) { return chartHeight - Math.max(0, yScale(d));})
          .attr("height", function(d) { return Math.abs(yScale(d)); })
          .attr("width", barWidth)
          .style("fill", "#01394B")
		  .style("stroke", "#01394B")
		  .style("stroke-width", "1px")
		  .style("opacity", function(d, i) { return 1 /*- (i * (1/data.length)); */});

      var yAxis = d3.axisLeft(yAxisScale);
      
      svg.append('g')
        .attr('transform', function(d) {
          return 'translate(' + margin.left + ', 0)';
        })
        .call(yAxis);

      /*
      var xScale = d3.scaleLinear()
                      .domain(0, data.length * barWidth)
                      .range(0, chartWidth);

      var xAxis = d3.axisBottom();
      */
      
    </script>
    </div>

{%endblock%}
